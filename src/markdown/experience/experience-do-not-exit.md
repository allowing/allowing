# PHP 中慎用 exit

今天下班之际，在 Q 群中和群友交流开发思想，其中一位群友贴的代码截图引起了我的一番“教训”。我说你这份代码我至少能抓出 10 个以上的毛病，哈哈哈。然后他们好像觉得很有意思，纷纷叫我指出。看来群友们还是很想知道的嘛，求知欲还挺强，鼓励。

我说，你的格式混乱，用了相对路径，最气人的是，当有逻辑不满足时，用了大量的 echo 提示，然后紧接着 exit 。

这里我就挑 exit 来说说。我们知道 exit 在 php 中的作用是结束脚本的执行，这会导致什么问题呢，日志无法记录，监控系统失效。我运营自己的系统之后才发现，一个系统的日志、监控一定要做到位，这样才能良好的运营，及早发现 BUG。当程序逻辑异常，要能触发日志系统记录日志，监控系统要及时通知管理员。可是当用了 exit 之后，这些日志功能、监控功能统统就都执行不到了。

程序出现了异常，正确的做法应该是抛出异常，把异常用一个异常对象描述清楚。当捕获到这个异常的时候，根据具体是什么异常来做处理，要记录日志的就记录日志，要通知管理员的就发邮件或短信通知管理员等。

日志记录通常还会把一些输入信息记录下来，例如 $_GET $_POST $_COOKIE $_SESSION $_SERVER 等等这些输入信息。
